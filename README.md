# Atlas Guardrails

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](https://github.com/yourusername/atlas)
[![Coverage Status](https://img.shields.io/badge/coverage-80%25-green)](https://github.com/yourusername/atlas)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**Atlas Guardrails** is a tool designed to make LLM coding agents safer, smarter, and less prone to creating technical debt. It provides deterministic context packing, duplication prevention, and drift detection guardrails.

## Features

*   **Deterministic Context**: `atlas pack` recursively finds relevant code, saving token budget and ensuring agents see what they need.
*   **Duplicate Prevention**: `atlas find-duplicates` helps agents reuse existing code instead of reinventing the wheel.
*   **Drift Guardrails**: `atlas check` prevents drift in public APIs and ensures the index is up-to-date.
*   **MCP Integration**: Native Model Context Protocol server to expose tools directly to Claude Code, Codex, and generic MCP clients.
*   **Ralphy Friendly**: Auto-generates configuration for [Ralphy](https://github.com/michaelshimeles/ralphy).

## Installation

### Global Installation (Recommended)

```bash
npm install -g atlas-guardrails
# or link from source
git clone https://github.com/yourusername/atlas.git
cd atlas
npm install
npm run build
npm link
```

## Usage

### CLI Commands

Run `atlas --help` for a full list of commands.

*   **Index your repository**:
    ```bash
    atlas index
    ```
    Creates `.atlas/` with symbol index and manifests. Run this first!

*   **Pack context for a task**:
    ```bash
    atlas pack -t "implement user authentication" --budget 50000
    ```
    Generates `pack.json` containing the most relevant code for the task.

*   **Find duplicates**:
    ```bash
    atlas find-duplicates -i "Button"
    ```
    Returns existing symbols that match the intent, helping you avoid duplicates.

*   **Check guardrails**:
    ```bash
    atlas check
    ```
    Verifies that the public API hasn't drifted from `approved_api.json` (if present) and that the index is consistent.

*   **Initialize Ralphy config**:
    ```bash
    atlas ralphy-init
    ```

### MCP Server Setup

Atlas includes a built-in MCP server.

**Claude Desktop / Code Configuration:**

Add this to your `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "atlas": {
      "command": "atlas",
      "args": ["mcp"]
    }
  }
}
```

## Documentation

*   [API Documentation](./docs/index.html) generated by TypeDoc.
*   [Contributing Guidelines](./CONTRIBUTING.md)

## Contributing

We welcome contributions! Please see [CONTRIBUTING.md](./CONTRIBUTING.md) for details on how to set up your development environment and submit pull requests.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.